{% extends 'base.html' %}
{% load static %}
{% block title %}Books{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'books/css/books.css' %}">
{% endblock %}

{% block content %}
<div class="row">
    <div class="col text-center mt-3">
        <hr class="mb-1">
        <!--Headers and adds Category name to beginning when they are selected-->
        <h2 class="page-header mb-1">
            {% for g in sorted_genres %}{{ g.view_genre }}{% endfor %} Books
        </h2>
        <hr class="mb-1">
    </div>
</div>
<!--Sorting-->
{%include 'includes/sort.html'%}
<!--Books-->
<div class="mt-3">
    <div class="container-fluid d-flex flex-row flex-wrap gap-1 gap-lg-2 justify-content-center m-0 p-0">
        <!-- searches through books rendering each one individually as small cards-->
        {% for book in books %}
        <div class="book-bg d-flex flex-wrap justify-content-center p-2 ">
            <div class="row book-card justify-content-center px-0 py-2">
                <div class="row book-card-txt p-0 m-0">
                    <p class="my-0 py-0 text-center book-card-title">{{ book.title }} {{ item.book.title }}
                        {%if book.condition == 'used'%}<i class="fa-solid fa-tag fa-beat"
                            style="color: #fa0000;"></i>{%endif%}</p>
                </div>
                <div class="col-4 book-card-img mt-2">
                    {% if book.image %}
                    <a href="" aria-label="View {{ book.title }}">
                        <img class="card-img" src="{{ book.image.url }}" alt="{{ book.title }}">
                    </a>
                    {% else %}
                    <a href="" aria-label="View {{ book.title }}">
                        <img class="card-img" src="{{ MEDIA_URL }}noimage.png" alt="{{ book.title }}">
                    </a>
                    {% endif %}
                </div>
                <div class="col-5 book-card-body text-center mt-2">
                    <p class="mb-3 book-card-txt"><strong>â‚¬{{ book.price }}</strong></p>
                    {% if book.genre %}
                    <p class="small my-3">
                        <a class="text-muted book-card-txt" href="{% url 'books' %}?genre={{ book.genre }}">
                            {{ book.genre.view_genre }}
                        </a>
                    </p>
                    {% endif %}
                    {% if book.rating %}
                    <small class="text-muted my-3 rating-txt"><i class="fas fa-star mr-1 rating"></i>{{ book.rating }} /
                        5</small>
                    {% else %}
                    <small class="text-muted my-3">No Rating</small>
                    {% endif %}
                    {% if request.user.is_superuser %}
                    <div class="row my-3">
                        <small>
                            <!--edit button-->
                            <a href="" aria-label="Edit {{ book.title }}">Edit</a> |
                            <!--delete button-->
                            <a class="text-danger" href="" aria-label="Delete {{ book.title }}">Delete</a>
                        </small>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

<!--Post load js-->
{% block postloadjs %}
{{ block.super }}
<script src="{% static 'books/js/books.js' %}"></script>
{% endblock %}